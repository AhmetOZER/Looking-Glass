<!--import Regex scheme's -->
<script src="assets/js/looking-glass.js"></script>

<script async>
  function hasIPVersionRequired() {
      $(".ipMayRequired").find("option:selected").each(function () {
        if ($(this).attr("hasIPVersion") == "yes") {
          $("#IPVersion").show();
        } else {
          $("#IPVersion").hide();
        }
      });
    }
    function applyIPVersionRegex() {
      switch($("#IPVersion").children("option:selected").val()) {
      case "Default": {
        $('#hostname').attr('pattern', domainRegex + "|" + ipv4Regex + "|" + ipv6Regex)
      } 
      case "IPv4": {
        $('#hostname').attr('pattern', domainRegex + "|" + ipv4Regex)
      }
      case "IPv6":{
        $('#hostname').attr('pattern', domainRegex + "|" + ipv6Regex)
      }
    }
    }

    $(".ipMayRequired").change(function () {
      hasIPVersionRequired()
    }).change();


    $("#IPVersion").change(function () {
      applyIPVersionRegex()
    }).change();

    $("#funcFrame").on("load", function () {
    $("#loadingCircle").hide()

    var iframe = $("#funcFrame");
    if (iframe.innerHTML()) {
      // get and check the Title (and H tags if you want)
      var ifTitle = iframe.contentDocument.title;
      if (ifTitle.indexOf("Ok") >= 0) {
        // we have a winner! probably a 404 page!
      }
    } else {
      // didn't load
    }
  });

  function lgRun() {
    var svURL = $("#" + Cookies.get('SelectedServerID')).data("svurl");
    if (svURL && svURL != "") {
      $("#loadingCircle").show();
      $("#funcCard").show()
      $('#funcFrame').attr('src', svURL + "/looking-glass-controller" + "?" + $("#lg_run_form").serialize())
      // $("#funcCard").show()
      //$('#funcFrame').attr('src', svURL+"?"+$("#lg_run_form").serialize())
      ///looking-glass-controller
    } else {
      $('#serverSelectModal').modal('toggle')
    }
  }

</script>

<!-- To enable bootstrap tooltip -->
<script>
  $(function () {
    $('[data-toggle="tooltip"]').tooltip()
  })
</script>